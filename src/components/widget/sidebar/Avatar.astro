---
import ImageWrapper from "$/components/misc/ImageWrapper.astro"
import { Icon } from "astro-icon/components"
import { url } from "$/utils/urls"
import strings from "$/config/strings"
import { profileConfig } from "$/config"
---

<a aria-label="Go to about page" href={url("/about/")} class="avatar">
  <div class="icon-wrapper">
    <Icon name="tabler:user-square" />
  </div>
  <ImageWrapper
    src={profileConfig.avatar}
    alt={strings.alts.profile}
    loading="eager"
  />
</a>

<style lang="scss">
  @use "$/styles/theme" as *;
  @use "$/styles/utils" as *;
  @use "$/styles/variants";

  .avatar {
    display: block;
    position: relative;
    margin: spacing(1) auto spacing(3);
    max-width: spacing(48);
    overflow: hidden;
    border-radius: $radius-xl;
    background-image: linear-gradient(
      to bottom,
      alpha(var(--profile-gradient-top), 20%),
      alpha(var(--profile-gradient-bottom), 20%)
    );

    .icon-wrapper {
      position: absolute;
      @include transition();
      pointer-events: none;
      width: 100%;
      height: 100%;
      z-index: 50;
      display: flex;
      align-items: center;
      justify-content: center;

      svg {
        width: spacing(12);
        height: spacing(12);
        @include transition();
        opacity: 0%;
        scale: 90%;
        color: white;
      }
    }

    &:active {
      scale: 95%;
      .icon-wrapper {
        background-color: black(50%);
      }
    }

    &:hover {
      .icon-wrapper {
        background-color: black(30%);
        svg {
          scale: 100%;
          opacity: 100%;
        }
      }
    }

    img {
      @include margin-x(auto);
      height: 100%;
    }
  }

  @include variants.lg {
    .avatar {
      @include margin-x(0);
      margin-top: 0;
      max-width: none;

      img {
        width: 100%;
        margin-top: 0;
      }
    }
  }
</style>
