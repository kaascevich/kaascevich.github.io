---
import { BANNER_HEIGHT_EXTEND } from '$/constants/constants'
import strings from '$/config/strings'
import type { BannerConfig } from '$/types/config'
import ImageWrapper from '$/components/misc/ImageWrapper.astro'

type Props = Readonly<{
  config: BannerConfig
}>
const { config } = Astro.props
---

<div id="banner-wrapper" style={`top: -${BANNER_HEIGHT_EXTEND}vh`}>
  <ImageWrapper
    id="banner"
    alt={strings.alts.banner}
    loading="eager"
    class="object-cover h-full transition duration-700 opacity-0 scale-105"
    src={config.src}
    position={config.position}
  />
</div>

<style lang="scss" define:vars={{ 'end-stop': 0.5, multiplier: 1 / 2 }}>
  @use '$/styles/theme' as *;
  @use '$/styles/utils' as *;
  @use '$/styles/variants';

  #banner-wrapper {
    position: absolute;
    z-index: 10;
    width: 100%;
    @include transition($duration: 700ms);
    overflow: hidden;

    mask-image: linear-gradient(
      to top,
      #0000 calc(25% * var(--multiplier) * var(--end-stop)),
      calc(75% * var(--multiplier) * var(--end-stop)),
      #000f calc(var(--end-stop) * 100%)
    );
  }
</style>
