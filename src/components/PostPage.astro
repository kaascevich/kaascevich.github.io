---
import { getPostUrlByID } from "@utils/url-utils"
import PostCard from "./PostCard.astro"
import type { Page } from "astro"
import type { CollectionEntry } from "astro:content"

type Props = {
  page: Page<CollectionEntry<"posts">>
}

const { page } = Astro.props

let delay = 0
const interval = 50
---

<div
  class="transition flex flex-col rounded-[var(--radius-large)] bg-[var(--card-bg)] py-1 md:py-0 md:bg-transparent md:gap-4 mb-4"
>
  {
    page.data.map((entry) => (
      <PostCard
        {entry}
        title={entry.data.title}
        tags={entry.data.tags}
        category={entry.data.category}
        published={entry.data.published}
        updated={entry.data.updated}
        url={getPostUrlByID(entry.id)}
        image={entry.data.image}
        description={entry.data.description}
        draft={entry.data.draft}
        class="onload-animation"
        style={`animation-delay: calc(var(--content-delay) + ${(delay += 1) * interval}ms);`}
      />
    ))
  }
</div>
