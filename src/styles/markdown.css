@import "$/styles/main.css";
@tailwind components;

.custom-md {
  h1 {
    @apply text-3xl;
  }

  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    .anchor {
      @apply transition -m-0.5 ml-[0.2ch] p-0.5 select-none opacity-0 no-underline !important;

      .anchor-icon {
        @apply mx-[0.45ch] !important;
      }
    }

    &:hover {
      .anchor {
        @apply opacity-100 !important;
      }
    }
  }

  a:not(.no-styling) {
    @apply relative bg-none link font-medium text-[--primary] underline decoration-[--link-underline] decoration-1 decoration-dashed underline-offset-4;

    &:hover,
    &:active {
      @apply decoration-transparent;
    }

    &[data-footnote-ref] {
      @apply -ml-0.5 no-underline;
    }
  }

  code {
    @apply bg-[--inline-code-bg] text-[--inline-code-color] p-1 rounded-md overflow-hidden;

    font-family:
      "Monaspace Radon",
      ui-monospace,
      SFMono-Regular,
      Menlo,
      Monaco,
      Consolas,
      Liberation Mono,
      Courier New,
      monospace;
    font-feature-settings:
      "calt", "liga", "ss01", "ss02", "ss03", "ss04", "ss05", "ss06", "ss07",
      "ss08", "ss09";

    &:before {
      @apply content-none;
    }
    &:after {
      @apply content-none;
    }

    counter-reset: line;
    span.line {
      &:before {
        @apply text-white/25 mr-4 w-4 inline-block;
        content: counter(line);
        counter-increment: line;
        direction: rtl;
      }
      &:last-child:empty,
      &:last-child:has(> span:empty:only-child) {
        display: none;
      }
    }
  }

  :not(pre) code {
    @apply relative bottom-[0.05rem];
  }

  pre {
    @apply bg-[--codeblock-bg] !important;
    @apply rounded-xl px-5;

    code {
      @apply bg-transparent text-inherit text-sm p-0;

      ::selection {
        @apply bg-[--codeblock-selection];
      }
    }
  }

  ul,
  ol {
    li::marker {
      @apply text-[--primary];
    }
  }

  blockquote {
    @apply not-italic border-transparent relative;
    font-weight: inherit;

    &:before {
      @apply content-[''] absolute -left-1 block transition bg-[--btn-regular-bg] h-full w-1 rounded-full;
    }

    /* remove the double quotes from default styles */
    p:before,
    p:after {
      @apply content-none;
    }
  }
}
