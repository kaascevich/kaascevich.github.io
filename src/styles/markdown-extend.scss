@use "sass:math";
@use "theme" as *;
@use "utils" as *;
@use "variants";

.custom-md {
  img {
    border-radius: $radius-xl;
  }

  hr {
    border-color: var(--line-divider);
    border-style: dashed;
  }

  iframe {
    border-radius: $radius-xl;
    margin: {
      left: auto;
      right: auto;
    }
    max-width: 100%;
  }
}

// MARK: GitHub Cards

a.card-github {
  display: block;
  background-color: var(--license-block-bg);
  position: relative;
  margin: spacing(2) spacing(0);
  padding: spacing(4.5) spacing(6);
  color: var(--tw-prose-body);
  border-radius: $radius-xl2;
  text-decoration-thickness: 0px;
  text-decoration-line: none;

  &:hover {
    background-color: var(--btn-regular-bg-hover);

    .gc-titlebar {
      color: var(--btn-content);
    }

    .gc-stars,
    .gc-forks,
    .gc-license,
    .gc-description {
      color: var(--tw-prose-headings);
      @include before {
        background-color: var(--tw-prose-headings);
      }
    }
  }

  &:active {
    scale: 98%;
    background-color: var(--btn-regular-bg-active);
  }

  .gc-titlebar {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: spacing(2);
    color: var(--tw-prose-headings);
    @include font-size($text-xl);
    font-weight: $font-weight-medium;

    .gc-titlebar-left {
      display: flex;
      gap: spacing(2);
      flex-flow: row nowrap;
    }

    .gc-repo {
      font-weight: $font-weight-bold;
    }

    .gc-owner {
      font-weight: $font-weight-light;
      position: relative;
      display: flex;
      gap: spacing(2);
      align-items: center;
      flex-flow: row nowrap;
    }

    .gc-avatar {
      display: block;
      overflow: hidden;
      width: spacing(6);
      height: spacing(6);
      background: {
        color: var(--primary);
        size: cover;
      }
      border-radius: 50%;
    }
  }

  .gc-description {
    margin-bottom: spacing(3);
    @include font-size($text-base);
    font-weight: $font-weight-light;
    color: var(--tw-prose-body);
  }

  .gc-infobar {
    display: flex;
    gap: spacing(6);
    color: var(--tw-prose-body);
    width: fit-content;
    flex-flow: row nowrap;
  }

  .gc-language {
    display: none;
  }

  .gc-stars,
  .gc-forks,
  .gc-license,
  .github-logo {
    font-weight: $font-weight-medium;
    @include font-size($text-sm);
    opacity: 90%;

    @include before(" ") {
      display: inline-block;
      width: 1.3em;
      height: 1.3em;
      margin-right: spacing(1);
      vertical-align: spacing(-1);
      background-color: var(--tw-prose-body);
      overflow: visible;
      @include transition(
        $properties: (
          background-color,
          background,
        )
      );
      font-size: inherit;
      mask-size: contain;
      mask-position: center;
      mask-repeat: no-repeat;
    }
  }

  .gc-stars {
    &::before {
      mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' aria-hidden='true' width='16' height='16' viewBox='0 0 24 24'%3E%3Cpath fill='none' stroke='currentColor' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='m12 17.75l-6.172 3.245l1.179-6.873l-5-4.867l6.9-1l3.086-6.253l3.086 6.253l6.9 1l-5 4.867l1.179 6.873z'/%3E%3C/svg%3E");
    }
  }

  .gc-license {
    &::before {
      margin-right: spacing(2);
      mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' aria-hidden='true' width='16' height='16' viewBox='0 0 24 24'%3E%3Cpath fill='none' stroke='currentColor' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M15 21H6a3 3 0 0 1-3-3v-1h10v2a2 2 0 0 0 4 0V5a2 2 0 1 1 2 2h-2m2-4H8a3 3 0 0 0-3 3v11M9 7h4m-4 4h4'/%3E%3C/svg%3E");
    }
  }

  .gc-forks {
    &::before {
      mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' aria-hidden='true' width='16' height='16' viewBox='0 0 24 24'%3E%3Cg fill='none' stroke='currentColor' stroke-linecap='round' stroke-linejoin='round' stroke-width='2'%3E%3Cpath d='M10 18a2 2 0 1 0 4 0a2 2 0 1 0-4 0M5 6a2 2 0 1 0 4 0a2 2 0 1 0-4 0m10 0a2 2 0 1 0 4 0a2 2 0 1 0-4 0'/%3E%3Cpath d='M7 8v2a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V8m-5 4v4'/%3E%3C/g%3E%3C/svg%3E");
    }
  }

  .github-logo {
    @include font-size($text-xl);

    display: none;
    @include variants.md {
      display: block;
    }

    &::before {
      background-color: var(--tw-prose-headings);
      margin-right: spacing(0);
      mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' viewBox='0 0 24 24'%3E%3Cpath fill='none' stroke='currentColor' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2c2.8-.3 5.5-1.4 5.5-6a4.6 4.6 0 0 0-1.3-3.2a4.2 4.2 0 0 0-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3 0 0 0-6.2 0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2 0 0 0-.1 3.2A4.6 4.6 0 0 0 4 9.5c0 4.6 2.7 5.7 5.5 6c-.6.6-.6 1.2-.5 2V21'/%3E%3C/svg%3E");
    }
  }
}

a.card-github.fetch-waiting {
  pointer-events: none;
  opacity: 70%;
  @include transition($properties: opacity);

  .gc-description,
  .gc-infobar,
  .gc-avatar {
    background-color: var(--tw-prose-body);
    color: transparent;
    opacity: 50%;
    user-select: none;
    animation: pulsate 2s infinite linear;
    @include before {
      background-color: transparent;
    }
  }

  .gc-description,
  .gc-infobar {
    border-radius: $radius-lg;
  }
}

a.card-github.fetch-error {
  opacity: 100%;
  pointer-events: all;
}

@keyframes pulsate {
  0% {
    opacity: 15%;
  }
  50% {
    opacity: 25%;
  }
  100% {
    opacity: 15%;
  }
}

.card-github,
.gc-description,
.gc-titlebar,
.gc-stars,
.gc-forks,
.gc-license,
.gc-avatar,
.github-logo {
  @include transition($properties: all);
}
