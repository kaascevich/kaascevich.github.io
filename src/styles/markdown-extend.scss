@use "sass:math";
@use "theme" as *;
@use "utils" as *;
@use "variants";

.custom-md {
  blockquote.admonition {
    .bdm-title {
      display: flex;
      align-items: center;
      margin-bottom: spacing(-3);
      font-weight: $font-weight-bold;

      @include before(" ") {
        display: inline-block;
        overflow: visible;
        margin-right: spacing(2.5);
        height: 1em;
        width: 1em;
        translate: 0 spacing(math.div(1, 8));
        font-size: inherit;
        mask: {
          size: contain;
          position: center;
          repeat: no-repeat;
        }
      }
    }
    &.bdm-tip {
      @include before {
        background-color: var(--admonitions-color-tip);
      }

      .bdm-title {
        color: var(--admonitions-color-tip);

        &::before {
          background-color: var(--admonitions-color-tip);
          scale: 137.5%;
          mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='1rem' height='1rem' viewBox='0 0 24 24' aria-hidden='true'%3E%3Cpath fill='none' stroke='currentColor' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M3 12h1m8-9v1m8 8h1M5.6 5.6l.7.7m12.1-.7l-.7.7M9 16a5 5 0 1 1 6 0a3.5 3.5 0 0 0-1 3a2 2 0 0 1-4 0a3.5 3.5 0 0 0-1-3m.7 1h4.6'/%3E%3C/svg%3E");
        }
      }
    }
    &.bdm-note {
      @include before {
        background-color: var(--admonitions-color-note);
      }

      .bdm-title {
        color: var(--admonitions-color-note);

        &::before {
          background-color: var(--admonitions-color-note);
          scale: 137.5%;
          mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='1rem' height='1rem' viewBox='0 0 24 24' aria-hidden='true'%3E%3Cg fill='none' stroke='currentColor' stroke-linecap='round' stroke-linejoin='round' stroke-width='2'%3E%3Cpath d='M3 12a9 9 0 1 0 18 0a9 9 0 0 0-18 0m9-3h.01'/%3E%3Cpath d='M11 12h1v4h1'/%3E%3C/g%3E%3C/svg%3E");
        }
      }
    }
    &.bdm-important {
      @include before {
        background-color: var(--admonitions-color-important);
      }

      .bdm-title {
        color: var(--admonitions-color-important);

        &::before {
          background-color: var(--admonitions-color-important);
          scale: 137.5%;
          mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='1rem' height='1rem' viewBox='0 0 24 24' aria-hidden='true'%3E%3Cpath fill='none' stroke='currentColor' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M8 9h8m-8 4h6m1 5l-3 3l-3-3H6a3 3 0 0 1-3-3V7a3 3 0 0 1 3-3h12a3 3 0 0 1 3 3v5.5M19 16v3m0 3v.01'/%3E%3C/svg%3E");
        }
      }
    }
    &.bdm-warning {
      @include before {
        background-color: var(--admonitions-color-warning);
      }

      .bdm-title {
        color: var(--admonitions-color-warning);

        &::before {
          background-color: var(--admonitions-color-warning);
          scale: 137.5%;
          mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='1rem' height='1rem' viewBox='0 0 24 24' aria-hidden='true'%3E%3Cpath fill='none' stroke='currentColor' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M12 9v4m-1.637-9.409L2.257 17.125a1.914 1.914 0 0 0 1.636 2.871h16.214a1.914 1.914 0 0 0 1.636-2.87L13.637 3.59a1.914 1.914 0 0 0-3.274 0zM12 16h.01'/%3E%3C/svg%3E");
        }
      }
    }
    &.bdm-caution {
      @include before {
        background-color: var(--admonitions-color-caution);
      }

      .bdm-title {
        color: var(--admonitions-color-caution);

        &::before {
          background-color: var(--admonitions-color-caution);
          scale: 137.5%;
          mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='1rem' height='1rem' viewBox='0 0 24 24' aria-hidden='true'%3E%3Cpath fill='none' stroke='currentColor' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='m12.802 2.165l5.575 2.389c.48.206.863.589 1.07 1.07l2.388 5.574c.22.512.22 1.092 0 1.604l-2.389 5.575c-.206.48-.589.863-1.07 1.07l-5.574 2.388c-.512.22-1.092.22-1.604 0l-5.575-2.389a2.04 2.04 0 0 1-1.07-1.07l-2.388-5.574a2.04 2.04 0 0 1 0-1.604l2.389-5.575c.206-.48.589-.863 1.07-1.07l5.574-2.388a2.04 2.04 0 0 1 1.604 0M12 8v4m0 4h.01'/%3E%3C/svg%3E");
        }
      }
    }
  }

  img {
    border-radius: $radius-xl;
  }

  hr {
    border-color: var(--line-divider);
    border-style: dashed;
  }

  iframe {
    border-radius: $radius-xl;
    margin: {
      left: auto;
      right: auto;
    }
    max-width: 100%;
  }
}

a.card-github {
  display: block;
  background-color: var(--license-block-bg);
  position: relative;
  margin: spacing(2) spacing(0);
  padding: spacing(4.5) spacing(6);
  color: var(--tw-prose-body);
  border-radius: $radius-xl2;
  text-decoration-thickness: 0px;
  text-decoration-line: none;

  &:hover {
    background-color: var(--btn-regular-bg-hover);

    .gc-titlebar {
      color: var(--btn-content);
    }

    .gc-stars,
    .gc-forks,
    .gc-license,
    .gc-description {
      color: var(--tw-prose-headings);
      @include before {
        background-color: var(--tw-prose-headings);
      }
    }
  }

  &:active {
    scale: 98%;
    background-color: var(--btn-regular-bg-active);
  }

  .gc-titlebar {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: spacing(2);
    color: var(--tw-prose-headings);
    @include font-size($text-xl);
    font-weight: $font-weight-medium;

    .gc-titlebar-left {
      display: flex;
      gap: spacing(2);
      flex-flow: row nowrap;
    }

    .gc-repo {
      font-weight: $font-weight-bold;
    }

    .gc-owner {
      font-weight: $font-weight-light;
      position: relative;
      display: flex;
      gap: spacing(2);
      align-items: center;
      flex-flow: row nowrap;
    }

    .gc-avatar {
      display: block;
      overflow: hidden;
      width: spacing(6);
      height: spacing(6);
      background: {
        color: var(--primary);
        size: cover;
      }
      border-radius: 50%;
    }
  }

  .gc-description {
    margin-bottom: spacing(3);
    @include font-size($text-base);
    font-weight: $font-weight-light;
    color: var(--tw-prose-body);
  }

  .gc-infobar {
    display: flex;
    gap: spacing(6);
    color: var(--tw-prose-body);
    width: fit-content;
    flex-flow: row nowrap;
  }

  .gc-language {
    display: none;
  }

  .gc-stars,
  .gc-forks,
  .gc-license,
  .github-logo {
    font-weight: $font-weight-medium;
    @include font-size($text-sm);
    opacity: 0.9;

    @include before(" ") {
      display: inline-block;
      width: 1.3em;
      height: 1.3em;
      margin-right: spacing(1);
      vertical-align: spacing(-1);
      background-color: var(--tw-prose-body);
      overflow: visible;
      @include transition(
        $properties: (
          background-color,
          background,
        )
      );
      font-size: inherit;
      mask-size: contain;
      mask-position: center;
      mask-repeat: no-repeat;
    }
  }

  .gc-stars {
    &::before {
      mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' aria-hidden='true' width='16' height='16' viewBox='0 0 24 24'%3E%3Cpath fill='none' stroke='currentColor' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='m12 17.75l-6.172 3.245l1.179-6.873l-5-4.867l6.9-1l3.086-6.253l3.086 6.253l6.9 1l-5 4.867l1.179 6.873z'/%3E%3C/svg%3E");
    }
  }

  .gc-license {
    &::before {
      margin-right: spacing(2);
      mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' aria-hidden='true' width='16' height='16' viewBox='0 0 24 24'%3E%3Cpath fill='none' stroke='currentColor' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M15 21H6a3 3 0 0 1-3-3v-1h10v2a2 2 0 0 0 4 0V5a2 2 0 1 1 2 2h-2m2-4H8a3 3 0 0 0-3 3v11M9 7h4m-4 4h4'/%3E%3C/svg%3E");
    }
  }

  .gc-forks {
    &::before {
      mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' aria-hidden='true' width='16' height='16' viewBox='0 0 24 24'%3E%3Cg fill='none' stroke='currentColor' stroke-linecap='round' stroke-linejoin='round' stroke-width='2'%3E%3Cpath d='M10 18a2 2 0 1 0 4 0a2 2 0 1 0-4 0M5 6a2 2 0 1 0 4 0a2 2 0 1 0-4 0m10 0a2 2 0 1 0 4 0a2 2 0 1 0-4 0'/%3E%3Cpath d='M7 8v2a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V8m-5 4v4'/%3E%3C/g%3E%3C/svg%3E");
    }
  }

  .github-logo {
    @include font-size($text-xl);

    &::before {
      background-color: var(--tw-prose-headings);
      margin-right: spacing(0);
      mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' viewBox='0 0 24 24'%3E%3Cpath fill='none' stroke='currentColor' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2c2.8-.3 5.5-1.4 5.5-6a4.6 4.6 0 0 0-1.3-3.2a4.2 4.2 0 0 0-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3 0 0 0-6.2 0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2 0 0 0-.1 3.2A4.6 4.6 0 0 0 4 9.5c0 4.6 2.7 5.7 5.5 6c-.6.6-.6 1.2-.5 2V21'/%3E%3C/svg%3E");
    }
  }
}

a.card-github.fetch-waiting {
  pointer-events: none;
  opacity: 0.7;
  @include transition($properties: opacity);

  .gc-description,
  .gc-infobar,
  .gc-avatar {
    background-color: var(--tw-prose-body);
    color: transparent;
    opacity: 0.5;
    user-select: none;
    animation: pulsate 2s infinite linear;
    @include before {
      background-color: transparent;
    }
  }

  .gc-description,
  .gc-infobar {
    border-radius: $radius-lg;
  }
}

a.card-github.fetch-error {
  opacity: 1;
  pointer-events: all;
}

@keyframes pulsate {
  0% {
    opacity: 0.15;
  }
  50% {
    opacity: 0.25;
  }
  100% {
    opacity: 0.15;
  }
}

.card-github,
.gc-description,
.gc-titlebar,
.gc-stars,
.gc-forks,
.gc-license,
.gc-avatar,
.github-logo {
  @include transition($properties: all);
}
