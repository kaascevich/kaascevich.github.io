---
import type { GetStaticPathsOptions, GetStaticPathsResult, Page } from 'astro'
import PostPage from '$/components/post/PostPage.astro'
import Pagination from '$/components/control/pagination/Pagination.astro'
import { PAGE_SIZE } from '$/constants/constants'
import MainGridLayout from '$/layouts/MainGridLayout.astro'
import { getSortedPosts } from '$/utils/content'
import type { Post } from '$/types/content'

export async function getStaticPaths({ paginate }: GetStaticPathsOptions) {
  return paginate(await getSortedPosts(), {
    pageSize: PAGE_SIZE,
  }) satisfies GetStaticPathsResult
}

interface Props {
  page: Page<Post>
}

const { page } = Astro.props
---

<MainGridLayout>
  <PostPage {page} />
  <Pagination
    class="mx-auto onload-animation"
    {page}
    style={`animation-delay: calc(var(--content-delay) + ${page.data.length * 50}ms)`}
  />
</MainGridLayout>
